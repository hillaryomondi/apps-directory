(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{W4Rb:function(e,t,n){"use strict";n.r(t);var o=n("pXKy");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default={mixins:[o.a],props:[],data:function(){return{form:{name:"",guard_name:"",permissions_matrix:[]},assign_all:!1,toggling:!1}},mounted:function(){this.form.id&&this.fetchRole()},methods:{fetchRole:function(){var e=this,t=e.$loading.show();axios.get("/api/roles/".concat(e.form.id)).then((function(t){e.form=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data.payload)})).catch((function(t){var n,o;e.$notify({type:"error",title:"API ERROR",text:(null==t||null===(n=t.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||(null==t?void 0:t.message)||t||"Error while fetching the role"})})).finally((function(){t.hide()}))},togglePermission:function(e,t){var n=this;n.toggling=!0,axios.post("/api/roles/".concat(n.form.id,"/permissions/toggle"),{permission:t.name,checked:t.checked}).then((function(e){})).catch((function(e){var o,i;t.checked=!t.checked,n.$notify({type:"error",text:(null==e||null===(o=e.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message)||(null==e?void 0:e.message)||e||"Update error"})})).finally((function(e){n.toggling=!1}))},toggleAllPermissions:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.toggling=!0;var o=this;axios.post("/api/roles/".concat(o.form.id,"/permissions/toggle-all"),{checked:n}).then((function(e){o.$notify({title:"SUCCESS",type:"success",text:e.data.message})})).catch((function(e){var t,n;return o.$notify({title:"ERROR",type:"error",text:(null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||e||"Server Error"}),!1})).finally((function(){o.fetchRole(),t.toggling=!1}))}}}}}]);